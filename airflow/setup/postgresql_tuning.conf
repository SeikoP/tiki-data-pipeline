# PostgreSQL Performance Tuning Configuration
# Add these to postgresql.conf or set via ALTER SYSTEM

# Memory Settings
shared_buffers = 256MB                  # 25% of RAM for dedicated server
effective_cache_size = 1GB              # 50-75% of RAM
work_mem = 16MB                         # Per operation memory
maintenance_work_mem = 128MB            # For VACUUM, CREATE INDEX

# Connection Settings
max_connections = 100                   # Reduce if using connection pooling
shared_preload_libraries = 'pg_stat_statements'

# Query Planning
random_page_cost = 1.1                  # Lower for SSD (default 4.0)
effective_io_concurrency = 200          # Higher for SSD (default 1)

# Write Performance
wal_buffers = 16MB
checkpoint_completion_target = 0.9
wal_compression = on

# Autovacuum (important for high-write workloads)
autovacuum = on
autovacuum_max_workers = 4
autovacuum_naptime = 10s

# Logging (for monitoring)
log_min_duration_statement = 1000       # Log queries > 1s
log_checkpoints = on
log_connections = on
log_disconnections = on
log_lock_waits = on

# Performance Monitoring
track_activities = on
track_counts = on
track_io_timing = on
track_functions = all
